<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ˜ŸæœŸå¤©æ–‡æ¡ˆé¦†ä¸“å±æ–‡æ¡ˆç”Ÿæˆå™¨</title>
    <link rel="preload" as="style" crossorigin
        href="https://fontsapi.zeoseven.com/498/main/result.css"
        onload="this.rel='stylesheet'"
        onerror="this.href='https://fontsapi-storage.zeoseven.com/498/main/result.css'" />
    <noscript>
        <link rel="stylesheet" href="https://fontsapi.zeoseven.com/498/main/result.css" />
    </noscript>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: "å¹³æ–¹åˆ˜æ˜‚ä¹å¤©ä½“", "PingFang SC", "Microsoft YaHei", "SimSun", "å®‹ä½“", sans-serif;
            background: linear-gradient(to bottom, #ffb3a7, #fedfe1, #fffafa);
            color: #5a3d3b;
            line-height: 1.6;
            min-height: 100vh;
            padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
        }
        
        .main-title {
            font-weight: normal;
        }
        
        .container {
            max-width: 100%;
            min-height: 100vh;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            text-align: center;
            padding: 25px 15px 15px;
            position: relative;
            z-index: 10;
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: #ff6b81;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        
        .tagline {
            font-size: 14px;
            color: #9d7c7b;
        }
        
        .page-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            padding: 0 15px;
        }
        
        .page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 15px 0;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            overflow-y: auto;
        }
        
        .page.active {
            opacity: 1;
            visibility: visible;
        }
        
        .nav {
            background-color: #fff;
            display: flex;
            justify-content: space-around;
            box-shadow: 0 -2px 15px rgba(0, 0, 0, 0.08);
            z-index: 100;
            padding: 10px 0;
            border-radius: 20px 20px 0 0;
        }
        
        .nav-item {
            text-align: center;
            flex: 1;
            padding: 5px 2px;
            font-size: 12px;
            color: #9d7c7b;
            position: relative;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .nav-item.active {
            color: #ff6b81;
        }
        
        .nav-item.active .nav-icon {
            transform: translateY(-3px);
            color: #ff6b81;
        }
        
        .nav-icon {
            font-size: 20px;
            margin-bottom: 3px;
            display: block;
            transition: all 0.3s;
        }
        
        .input-area {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .input-area::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff9e8d, #fedfe1);
        }
        
        .input-title {
            font-size: 14px;
            margin-bottom: 12px;
            color: #7a5a58;
            text-align: center;
        }
        
        .input-field {
            width: 100%;
            min-height: 70px;
            border: 2px solid #fedfe1;
            border-radius: 15px;
            padding: 12px;
            font-size: 16px;
            font-family: inherit;
            resize: none;
            margin-bottom: 15px;
            transition: all 0.3s;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .input-field:focus {
            outline: none;
            border-color: #ffb3a7;
            box-shadow: 0 0 0 3px rgba(255, 179, 167, 0.3);
        }
        
        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
            justify-content: center;
        }
        
        .keyword {
            background: linear-gradient(135deg, #ffb3a7, #ff9e8d);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 5px rgba(255, 179, 167, 0.4);
        }
        
        .keyword:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(255, 179, 167, 0.5);
        }
        
        .generate-btn {
            background: linear-gradient(135deg, #ff6b81, #ff4f6d);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 10px 20px;
            font-size: 14px;
            display: block;
            margin: 0 auto;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 3px 8px rgba(255, 107, 129, 0.4);
        }
        
        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 12px rgba(255, 107, 129, 0.5);
        }
        
        .generate-btn:active {
            transform: translateY(1px);
        }
        
        .results {
            margin-top: 20px;
            display: none;
        }
        
        .result-item {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 18px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            position: relative;
            transform: translateY(20px);
            opacity: 0;
            animation: fadeInUp 0.5s forwards;
        }
        
        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-text {
            margin-bottom: 18px;
            font-size: 16px;
            line-height: 1.6;
            color: #5a3d3b;
            position: relative;
            padding-left: 22px;
        }
        
        .result-text::before {
            content: """;
            position: absolute;
            left: 0;
            top: -5px;
            font-size: 24px;
            color: #ffb3a7;
        }
        
        /* æ–°å¢ï¼šç½‘æ„Ÿæ–‡æ¡ˆæ ‡ç­¾æ ·å¼ï¼ˆå¦‚#æ—¥å¸¸ #æ²»æ„ˆï¼‰ */
        .result-tag {
            display: inline-block;
            font-size: 12px;
            color: #ff6b81;
            background: rgba(255, 107, 129, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            margin-right: 6px;
            margin-top: 8px;
        }
        
        .result-actions {
            display: flex;
            justify-content: space-around;
            border-top: 1px solid #f8e5e5;
            padding-top: 15px;
        }
        
        .action-btn {
            background: none;
            border: none;
            color: #9d7c7b;
            font-size: 14px;
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 5px 10px;
            border-radius: 8px;
            transition: all 0.3s;
        }
        
        .action-btn:hover {
            background: rgba(255, 179, 167, 0.1);
        }
        
        .action-btn i {
            margin-right: 5px;
            font-size: 16px;
        }
        
        .action-btn.active {
            color: #ff6b81;
        }
        
        .regenerate {
            background: linear-gradient(135deg, #ffb3a7, #ff9e8d);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 12px 25px;
            font-size: 14px;
            display: block;
            margin: 25px auto;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 12px rgba(255, 179, 167, 0.4);
        }
        
        .regenerate:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(255, 179, 167, 0.5);
        }
        
        .footer {
            text-align: center;
            padding: 20px 0 15px;
            color: #9d7c7b;
            font-size: 12px;
            margin-top: auto;
        }
        
        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #9d7c7b;
        }
        
        .empty-icon {
            font-size: 60px;
            margin-bottom: 20px;
            color: #ffd1c9;
            opacity: 0.7;
        }
        
        .empty-text {
            font-size: 16px;
            margin-bottom: 25px;
        }
        
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            margin: 0 auto 15px;
            border: 3px solid rgba(255, 179, 167, 0.3);
            border-radius: 50%;
            border-top-color: #ff6b81;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: #7a5a58;
            font-size: 15px;
        }
        
        .toast {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(90, 61, 59, 0.85);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
        }
        
        .toast.show {
            opacity: 1;
            visibility: visible;
        }
        
        .saved-results {
            margin-top: 20px;
        }
        
        .page-title {
            font-size: 20px;
            text-align: center;
            margin-bottom: 20px;
            color: #ff6b81;
            font-weight: bold;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media (max-width: 360px) {
            .logo {
                font-size: 24px;
            }
            
            .nav-icon {
                font-size: 18px;
            }
            
            .nav-item {
                font-size: 11px;
                padding: 5px 1px;
            }
            
            .input-field {
                min-height: 60px;
            }
            
            .keyword {
                font-size: 12px;
                padding: 5px 10px;
            }
            
            .generate-btn {
                padding: 8px 16px;
                font-size: 13px;
            }
            
            .page-title {
                font-size: 18px;
            }
            
            .result-text {
                font-size: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ç®€æ´æ ‡é¢˜ -->
        <div class="header">
            <div class="logo main-title">æ˜ŸæœŸå¤©æ–‡æ¡ˆé¦†ä¸“å±æ–‡æ¡ˆç”Ÿæˆå™¨</div>
            <div class="tagline">ä¸€é”®ç”Ÿæˆä¼˜è´¨æœ‹å‹åœˆæ–‡æ¡ˆ</div>
        </div>
        
        <div class="page-container">
            <!-- é¦–é¡µï¼šç”Ÿæˆæ–‡æ¡ˆ -->
            <div class="page active" id="home">
                <div class="input-area">
                    <div class="input-title">è¯·è¾“å…¥å…³é”®è¯æˆ–é€‰æ‹©ä¸‹æ–¹æ¨èè¯</div>
                    <textarea class="input-field" placeholder="ä¾‹å¦‚ï¼šè‡ªæ‹ã€æ—¶å…‰ã€å…¥ç§‹ã€å‘¨æœ«ã€å’–å•¡..."></textarea>
                    
                    <!-- æ–°å¢ç½‘æ„Ÿå…³é”®è¯ï¼šè¦†ç›–æ›´å¤šç¤¾äº¤åœºæ™¯ -->
                    <div class="keywords">
                        <div class="keyword">è‡ªæ‹æ—¶åˆ»</div>
                        <div class="keyword">ç¾å¥½æ—¶å…‰</div>
                        <div class="keyword">å…¥ç§‹å¿ƒæƒ…</div>
                        <div class="keyword">å‘¨æœ«æ—¥å¸¸</div>
                        <div class="keyword">å’–å•¡ç»­å‘½</div>
                        <div class="keyword">citywalk</div>
                        <div class="keyword">å®…å®¶æ²»æ„ˆ</div>
                        <div class="keyword">ç¾é£Ÿæ‰“å¡</div>
                    </div>
                    
                    <button class="generate-btn">ç”Ÿæˆæ–‡æ¡ˆ</button>
                </div>
                
                <div class="loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-text">AIæ­£åœ¨åˆ†æå…³é”®è¯å¹¶ç”Ÿæˆæ–‡æ¡ˆ...</div>
                </div>
                
                <div class="results">
                    <!-- ç”Ÿæˆçš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
                
                <button class="regenerate">é‡æ–°ç”Ÿæˆ</button>
            </div>
            
            <!-- æˆ‘çš„å–œæ¬¢é¡µé¢ -->
            <div class="page" id="likes">
                <div class="page-title">æˆ‘çš„å–œæ¬¢</div>
                
                <div class="saved-results" id="liked-results">
                    <!-- å–œæ¬¢çš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
                
                <div class="empty-state" id="liked-empty">
                    <div class="empty-icon">â™¥</div>
                    <div class="empty-text">æš‚æ— å–œæ¬¢çš„æ–‡æ¡ˆ</div>
                    <button class="generate-btn" onclick="switchPage('home')">å»ç”Ÿæˆæ–‡æ¡ˆ</button>
                </div>
            </div>
            
            <!-- æˆ‘çš„æ”¶è—é¡µé¢ -->
            <div class="page" id="collections">
                <div class="page-title">æˆ‘çš„æ”¶è—</div>
                
                <div class="saved-results" id="collected-results">
                    <!-- æ”¶è—çš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
                
                <div class="empty-state" id="collected-empty">
                    <div class="empty-icon">â˜†</div>
                    <div class="empty-text">æš‚æ— æ”¶è—çš„æ–‡æ¡ˆ</div>
                    <button class="generate-btn" onclick="switchPage('home')">å»ç”Ÿæˆæ–‡æ¡ˆ</button>
                </div>
            </div>
            
            <!-- é¦†å†…æ¨èé¡µé¢ -->
            <div class="page" id="recommendations">
                <div class="page-title">é¦†å†…æ¨è</div>
                
                <div class="saved-results" id="recommended-results">
                    <!-- æ¨èçš„æ–‡æ¡ˆå°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
                </div>
                
                <div class="empty-state" id="recommended-empty">
                    <div class="empty-icon">â­‘</div>
                    <div class="empty-text">æš‚æ— æ¨èçš„æ–‡æ¡ˆ</div>
                    <button class="generate-btn" onclick="switchPage('home')">å»ç”Ÿæˆæ–‡æ¡ˆ</button>
                </div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å¯¼èˆª -->
        <div class="nav">
            <div class="nav-item active" data-page="home">
                <span class="nav-icon">âš¡</span>
                <div>ç”Ÿæˆ</div>
            </div>
            <div class="nav-item" data-page="likes">
                <span class="nav-icon">â™¥</span>
                <div>æˆ‘çš„å–œæ¬¢</div>
            </div>
            <div class="nav-item" data-page="collections">
                <span class="nav-icon">â˜†</span>
                <div>æˆ‘çš„æ”¶è—</div>
            </div>
            <div class="nav-item" data-page="recommendations">
                <span class="nav-icon">â­‘</span>
                <div>é¦†å†…æ¨è</div>
            </div>
        </div>
        
        <div class="footer">
            Â©æ˜ŸæœŸå¤©æ–‡æ¡ˆé¦†ä¸“å±
        </div>
        
        <div class="toast" id="toast">æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿</div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let likedCopies = [];
        let collectedCopies = [];
        let recommendedCopies = [];
        let usedIndexes = [];
        
        // 1. å‡çº§ç½‘æ„Ÿæ–‡æ¡ˆæ¨¡æ¿åº“ï¼šèå…¥æµè¡Œè¡¨è¾¾ã€æƒ…ç»ªå…±é¸£ã€åœºæ™¯åŒ–æè¿°
        const highQualityTemplates = [
            // è‡ªæ‹ç±»ï¼šå¼ºè°ƒã€Œé¢œå€¼ã€çŠ¶æ€ã€æ°›å›´æ„Ÿã€
            "ä»Šæ—¥ä»½è‡ªæ‹åŠ è½½å®Œæ¯•âœ¨ é¢œå€¼å’Œå¿ƒæƒ…éƒ½åœ¨çº¿",
            "å¯¹ç€é•œå¤´æ¯”ä¸ªè€¶ï½ å¿«ä¹ä¸éœ€è¦æ»¤é•œğŸ“¸",
            "è§’åº¦æ‰¾å¯¹ï¼Œè‡ªæ‹ç¿»å€ï¼ä»Šå¤©ä¹Ÿæ˜¯è¢«è‡ªå·±ç¾åˆ°çš„ä¸€å¤©ğŸ’–",
            "è‡ªæ‹çš„æ„ä¹‰ï¼šè®°å½•æ¯ä¸€ä¸ªã€Œæˆ‘è¶…æ£’ã€çš„ç¬é—´ğŸŒŸ",
            "åŸç›¸æœºç›´å‡ºä¹Ÿæ•¢å‘ï¼çŠ¶æ€å¥½åˆ°ä¸ç”¨På›¾çš„å¿«ä¹è°æ‡‚å•Šï½",
            
            // æ—¶å…‰/æ—¥å¸¸ç±»ï¼šåŠ å…¥ã€Œæ¾å¼›æ„Ÿã€å°ç¡®å¹¸ã€æ²»æ„ˆã€ç­‰ç½‘æ„Ÿè¯æ±‡
            "ç”Ÿæ´»ä¸æ˜¯é€‰æ‹©ï¼Œæ˜¯çƒ­çˆ±ï½ æ…¢ä¸‹æ¥æ‰å‘ç°å¤„å¤„æ˜¯å°ç¡®å¹¸ğŸŒ¿",
            "æ—¶é—´ä¼šè¿‡æ»¤æ‰ä¸å¼€å¿ƒï¼Œç•™ä¸‹çš„å…¨æ˜¯æ¸©æŸ”å‘€ğŸ’«",
            "æŠŠæ—¥å­è¿‡æˆè‡ªå·±å–œæ¬¢çš„æ ·å­ï¼Œæ¯å¤©éƒ½æ˜¯é™å®šæ¬¾âœ¨",
            "ä¸éœ€è¦è¿½èµ¶åˆ«äººçš„è„šæ­¥ï¼Œæˆ‘çš„èŠ‚å¥å°±å¾ˆå¥½å‘€ï½",
            "å¹³å‡¡çš„æ—¥å­é‡Œï¼Œè—ç€æœ€è¸å®çš„å¹¸ç¦ğŸ¥‚",
            
            // å…¥ç§‹ç±»ï¼šç»“åˆã€Œå­£èŠ‚ä»ªå¼æ„Ÿã€æ°›å›´æ„Ÿã€
            "ç§‹é£ä¸€å¹ï¼Œæ‰€æœ‰çš„æ¸©æŸ”éƒ½æœ‰äº†å½’å¤„ğŸ‚",
            "å…¥ç§‹çš„ç¬¬ä¸€æ¯çƒ­é¥®+ç¬¬ä¸€ä»¶é’ˆç»‡è¡«ï¼Œä»ªå¼æ„Ÿæ‹‰æ»¡ï¼",
            "ç§‹å¤©æ˜¯æ…¢æ…¢å˜å†·çš„ï¼Œå¿«ä¹æ˜¯çªç„¶å‡ºç°çš„ï½ ğŸ",
            "å’Œå¤å¤©è¯´å†è§ï¼Œå’Œæ¸©æŸ”çš„ç§‹å¤©æ’ä¸ªæ»¡æ€€ğŸŒ¾",
            "è½å¶çŸ¥ç§‹ï¼Œå¾®é£å¾æ¥ï¼Œæ‰€æœ‰ç¾å¥½éƒ½ä¸æœŸè€Œé‡",
            
            // å‘¨æœ«ç±»ï¼šå¼ºè°ƒã€Œæ¾å¼›ã€èººå¹³ã€æ²»æ„ˆã€
            "å‘¨æœ«æ¨¡å¼å¼€å¯ï¼šä¸èµ¶æ—¶é—´ï¼Œä¸èµ¶è¿›åº¦ï¼Œåªèµ¶å¿«ä¹ğŸš¶â€â™€ï¸",
            "å‘¨æœ«çš„æ„ä¹‰ï¼šæŠŠç”Ÿæ´»è¿˜ç»™è‡ªå·±ï¼ŒæŠŠå¿«ä¹è¿˜ç»™å¿ƒæƒ…ï½",
            "å®…å®¶èººå¹³çš„å‘¨æœ«ï¼Œæ¯”ä»»ä½•ç¤¾äº¤éƒ½æ²»æ„ˆğŸ’¤",
            "å‘¨æœ«ä¸ç”¨é—¹é’Ÿçš„å¿«ä¹ï¼Œè°æ‡‚å•Šï¼è‡ªç„¶é†’yydsâœ¨",
            "çº¦ä¸Šå¥½å‹é€›åƒé€›åƒï½ å‘¨æœ«å°±æ˜¯è¦å°½å…´å‘€ğŸ¥³",
            
            // å’–å•¡/ç¾é£Ÿç±»ï¼šçªå‡ºã€Œç»­å‘½ã€æ²»æ„ˆã€å¹¸ç¦æ„Ÿã€
            "å’–å•¡ç»­å‘½çš„ä¸€å¤©â˜• ä¸€å£ä¸‹å»ï¼Œæ¸…é†’åˆæ²»æ„ˆ",
            "ç¾é£Ÿæ˜¯å¿«ä¹çš„å¼€å…³ï¼åƒåˆ°å¥½åƒçš„ç¬é—´ï¼Œæ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±äº†ğŸ°",
            "ä¸æ˜¯åœ¨å–å’–å•¡ï¼Œå°±æ˜¯åœ¨å»ä¹°å’–å•¡çš„è·¯ä¸Šï½ æ‰“å·¥äººçš„ç»­å‘½ç¥å™¨âœ¨",
            "å¥½å¥½åƒé¥­ï¼Œå¥½å¥½ç”Ÿæ´»ï¼Œäººé—´çƒŸç«æ°”æœ€æŠšå‡¡äººå¿ƒå‘€ğŸœ",
            "ä»Šæ—¥ä»½ç¢³æ°´å¿«ä¹å·²ç­¾æ”¶ï¼é•¿èƒ–ä»€ä¹ˆçš„æ˜å¤©å†è€ƒè™‘å§ï½",
            
            // é€šç”¨æ²»æ„ˆç±»ï¼šèå…¥ã€Œæ‡‚ã€è°æ‡‚ã€yydsã€ç»ç»å­ã€ç­‰ç¤¾äº¤é«˜é¢‘è¯
            "æ²»æ„ˆè‡ªå·±çš„æ–¹å¼æœ‰å¾ˆå¤šï¼Œæ¯”å¦‚ä»Šå¤©çš„é˜³å…‰å’Œä½ ğŸ’–",
            "ä¸éœ€è¦å¾ˆå®Œç¾ï¼Œåšè‡ªå·±å°±å¥½å‘€ï½ ä½ å·²ç»å¾ˆæ£’äº†ï¼",
            "æŠŠçƒ¦æ¼ä¸¢è¿›é£é‡Œï¼Œä»Šå¤©åªè´Ÿè´£å¼€å¿ƒâœ¨",
            "å¿«ä¹ä¸éœ€è¦ç†ç”±ï¼Œæ¯”å¦‚æ­¤åˆ»çš„å¾®é£å’Œå¥½å¬çš„æ­ŒğŸµ",
            "ç”Ÿæ´»å¶å°”æœ‰ç‚¹éš¾ï¼Œä½†è¿˜å¥½æœ‰å¾ˆå¤šå°ç¾å¥½åœ¨æ’‘è…°å‘€ï½"
        ];
        
        // 2. å‡çº§æƒ…æ„Ÿå…³é”®è¯æ˜ å°„ï¼šå¢åŠ ã€Œç½‘æ„Ÿå±æ€§è¯ã€ï¼ˆå¦‚ç»­å‘½ã€æ¾å¼›ã€æ°›å›´æ„Ÿï¼‰
        const emotionKeywords = {
            "è‡ªæ‹": ["é¢œå€¼", "çŠ¶æ€", "æ°›å›´æ„Ÿ", "é•œå¤´æ„Ÿ", "åŸç›¸æœº", "æ»¤é•œ", "æ¯”è€¶", "å¿«ä¹"],
            "æ—¶å…‰": ["æ²»æ„ˆ", "æ¸©æŸ”", "å°ç¡®å¹¸", "æ¾å¼›æ„Ÿ", "é™å®šæ¬¾", "å›å¿†", "è¸å®", "çƒ­çˆ±"],
            "å…¥ç§‹": ["ä»ªå¼æ„Ÿ", "æ¸©æŸ”", "è½å¶", "çƒ­é¥®", "é’ˆç»‡è¡«", "å¾®é£", "ä¸æœŸè€Œé‡", "é‡‘é»„"],
            "å‘¨æœ«": ["èººå¹³", "æ²»æ„ˆ", "é€›åƒ", "è‡ªç„¶é†’", "å°½å…´", "æ¾å¼›", "å¿«ä¹", "å®…å®¶"],
            "å’–å•¡": ["ç»­å‘½", "æ¸…é†’", "æ²»æ„ˆ", "æ‰“å·¥äºº", "é†‡é¦™", "ä»ªå¼æ„Ÿ", "æç¥", "æ”¾æ¾"],
            "citywalk": ["æ¼«æ¸¸", "è‡ªåœ¨", "è¡—å¤´", "çƒŸç«æ°”", "æ¢ç´¢", "æ¾å¼›", "éšæ‰‹æ‹", "æ²»æ„ˆ"],
            "ç¾é£Ÿ": ["å¿«ä¹å¼€å…³", "ç¢³æ°´å¿«ä¹", "äººé—´çƒŸç«", "å¥½åƒåˆ°çˆ†", "å¹¸ç¦æ„Ÿ", "è§£é¦‹", "æ»¡è¶³"],
            "å®…å®¶": ["èººå¹³", "æ²»æ„ˆ", "è¿½å‰§", "æ”¾æ¾", "èˆ’é€‚", "è‡ªåœ¨", "ä¸è¢«æ‰“æ‰°", "æƒ¬æ„"]
        };
        
        // 3. å‡çº§æ–‡æ¡ˆç»“æ„æ¨¡æ¿ï¼šåŠ å…¥ã€Œç½‘æ„Ÿå¥å¼ã€ï¼ˆå¦‚è°æ‡‚å•Šã€yydsã€ä¸éœ€è¦...åªéœ€è¦...ï¼‰
        const structureTemplates = [
            "{ä¸»é¢˜}çš„å¿«ä¹è°æ‡‚å•Šï¼{æƒ…æ„Ÿ}ç›´æ¥æ‹‰æ»¡âœ¨",
            "ä»Šæ—¥ä»½{ä¸»é¢˜}å·²ä¸Šçº¿ï½ {æƒ…æ„Ÿ}æ„Ÿç»äº†ï¼",
            "ä¸éœ€è¦{æ— å…³è¯}ï¼Œåªéœ€è¦{ä¸»é¢˜}å¸¦æ¥çš„{æƒ…æ„Ÿ}å°±å¤Ÿå•¦ï½",
            "{ä¸»é¢˜}yydsï¼{æƒ…æ„Ÿ}åˆ°ä¸æƒ³ç»“æŸğŸ¥³",
            "å…³äº{ä¸»é¢˜}ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼š{æƒ…æ„Ÿ}+å¿«ä¹ğŸ’–",
            "{ä¸»é¢˜}æ—¶é—´åˆ°ï¼æŠŠ{æƒ…æ„Ÿ}ç„Šåœ¨èº«ä¸Šçš„ä¸€å¤©ï½",
            "è¢«{ä¸»é¢˜}æ²»æ„ˆçš„ä¸€å¤©ï¼Œ{æƒ…æ„Ÿ}å€¼ç›´æ¥æ‹‰æ»¡ğŸŒŸ",
            "{ä¸»é¢˜}ä¸æ˜¯ä»»åŠ¡ï¼Œæ˜¯{æƒ…æ„Ÿ}çš„æ—¥å¸¸å‘€ï½",
            "è§£é”{ä¸»é¢˜}æ–°å§¿åŠ¿ï¼{æƒ…æ„Ÿ}æ„Ÿç›´æ¥æº¢å‡ºå±å¹•ğŸ“¸",
            "{ä¸»é¢˜}çš„æ„ä¹‰ï¼šè®°å½•æ¯ä¸€ä¸ª{æƒ…æ„Ÿ}çš„ç¬é—´âœ¨"
        ];
        
        // 4. æ–°å¢ï¼šæ— å…³è¯åº“ï¼ˆç”¨äºç»“æ„æ¨¡æ¿ä¸­ã€Œä¸éœ€è¦...ã€å¥å¼ï¼Œå¢å¼ºç½‘æ„Ÿï¼‰
        const irrelevantWords = ["å†…å·", "ç„¦è™‘", "èµ¶æ—¶é—´", "è®¨å¥½åˆ«äºº", "å®Œç¾ä¸»ä¹‰", "å‹åŠ›"];
        
        // 5. æ–°å¢ï¼šåœºæ™¯åŒ–æ ‡ç­¾åº“ï¼ˆè‡ªåŠ¨ä¸ºæ–‡æ¡ˆæ·»åŠ #è¯é¢˜æ ‡ç­¾ï¼Œæå‡ç¤¾äº¤ä¼ æ’­æ€§ï¼‰
        const topicTags = {
            "è‡ªæ‹": ["#è‡ªæ‹æ—¥å¸¸", "#é¢œå€¼åˆ†äº«", "#ä»Šæ—¥çŠ¶æ€"],
            "æ—¶å…‰": ["#ç”Ÿæ´»æ„Ÿæ‚Ÿ", "#å°ç¡®å¹¸", "#æ²»æ„ˆç³»"],
            "å…¥ç§‹": ["#ç§‹æ—¥æ°›å›´æ„Ÿ", "#å…¥ç§‹ä»ªå¼æ„Ÿ", "#ç§‹å¤©æ–‡æ¡ˆ"],
            "å‘¨æœ«": ["#å‘¨æœ«å¿«ä¹", "#èººå¹³æ—¥å¸¸", "#æ¾å¼›æ„Ÿç”Ÿæ´»"],
            "å’–å•¡": ["#å’–å•¡ç»­å‘½", "#æ‰“å·¥äººæ—¥å¸¸", "#æ²»æ„ˆå’–å•¡"],
            "citywalk": ["#åŸå¸‚æ¼«æ¸¸", "#è¡—å¤´çƒŸç«", "#citywalkæ—¥è®°"],
            "ç¾é£Ÿ": ["#ç¾é£Ÿæ‰“å¡", "#ç¢³æ°´å¿«ä¹", "#äººé—´çƒŸç«æ°”"],
            "å®…å®¶": ["#å®…å®¶æ—¥å¸¸", "#æ²»æ„ˆå®…å®¶", "#å‘¨æœ«å®…å®¶"]
        };
        
        document.addEventListener('DOMContentLoaded', function() {
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            loadSavedData();
            
            // é¡µé¢å¯¼èˆª
            const navItems = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.page');
            const toast = document.getElementById('toast');
            
            // åˆå§‹åŒ–é¡µé¢çŠ¶æ€
            let currentPage = 'home';
            
            // å¯¼èˆªç‚¹å‡»äº‹ä»¶
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    switchPage(pageId);
                });
            });
            
            // åˆ‡æ¢é¡µé¢å‡½æ•°
            function switchPage(pageId) {
                // æ›´æ–°å¯¼èˆªçŠ¶æ€
                navItems.forEach(nav => nav.classList.remove('active'));
                document.querySelector(`.nav-item[data-page="${pageId}"]`).classList.add('active');
                
                // æ˜¾ç¤ºå¯¹åº”é¡µé¢
                pages.forEach(page => {
                    page.classList.remove('active');
                    if (page.id === pageId) {
                        page.classList.add('active');
                    }
                });
                
                currentPage = pageId;
                
                // å¦‚æœåˆ‡æ¢åˆ°ä¿å­˜çš„é¡µé¢ï¼Œæ›´æ–°å†…å®¹
                if (pageId === 'likes') {
                    updateSavedResults('likes');
                } else if (pageId === 'collections') {
                    updateSavedResults('collections');
                } else if (pageId === 'recommendations') {
                    updateSavedResults('recommendations');
                }
            }
            
            // å…³é”®è¯ç‚¹å‡»ï¼šä¼˜åŒ–å…³é”®è¯é‡å¤æ·»åŠ é—®é¢˜
            const keywords = document.querySelectorAll('.keyword');
            const inputField = document.querySelector('.input-field');
            
            keywords.forEach(keyword => {
                keyword.addEventListener('click', function() {
                    const currentText = inputField.value.trim();
                    const tagText = this.textContent;
                    // é¿å…é‡å¤æ·»åŠ åŒä¸€å…³é”®è¯
                    if (!currentText.split(/\s+/).includes(tagText)) {
                        inputField.value = currentText 
                            ? `${currentText} ${tagText}` 
                            : tagText;
                    }
                    inputField.focus();
                });
            });
            
            // ç”Ÿæˆæ–‡æ¡ˆ
            const generateBtn = document.querySelector('.generate-btn');
            const resultsContainer = document.querySelector('.results');
            const regenerateBtn = document.querySelector('.regenerate');
            const loading = document.querySelector('.loading');
            
            generateBtn.addEventListener('click', generateCopy);
            regenerateBtn.addEventListener('click', generateCopy);
            
            // è¾“å…¥æ¡†å›è½¦ç”Ÿæˆï¼ˆå¢å¼ºä¾¿æ·æ€§ï¼‰
            inputField.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    generateCopy();
                }
            });
            
            function generateCopy() {
                const userInput = inputField.value || "ç¾å¥½æ—¶å…‰";
                const keywords = extractKeywords(userInput);
                
                // æ˜¾ç¤ºåŠ è½½ä¸­
                loading.style.display = 'block';
                resultsContainer.style.display = 'none';
                regenerateBtn.style.display = 'none';
                
                // æ¨¡æ‹ŸAIæ€è€ƒæ—¶é—´
                setTimeout(() => {
                    // éšè—åŠ è½½ä¸­
                    loading.style.display = 'none';
                    
                    // æ¸…ç©ºä¹‹å‰çš„ç»“æœ
                    resultsContainer.innerHTML = '';
                    
                    // é‡ç½®å·²ä½¿ç”¨ç´¢å¼•
                    usedIndexes = [];
                    
                    // ç”Ÿæˆ10æ¡æ–‡æ¡ˆ
                    for (let i = 0; i < 10; i++) {
                        const { copy, tag } = generateSmartCopy(keywords, i); // æ–°å¢æ ‡ç­¾è¿”å›
                        
                        const resultItem = document.createElement('div');
                        resultItem.className = 'result-item';
                        resultItem.style.animationDelay = `${i * 0.1}s`;
                        resultItem.dataset.text = copy; // ä»…å­˜å‚¨æ–‡æ¡ˆä¸»ä½“ï¼Œæ’é™¤æ ‡ç­¾
                        
                        // æ£€æŸ¥æ˜¯å¦å·²ç»å–œæ¬¢/æ”¶è—/æ¨è
                        const isLiked = likedCopies.includes(copy);
                        const isCollected = collectedCopies.includes(copy);
                        const isRecommended = recommendedCopies.includes(copy);
                        
                        // æ–‡æ¡ˆ+æ ‡ç­¾ç»„åˆæ¸²æŸ“
                        resultItem.innerHTML = `
                            <div class="result-text">${copy}</div>
                            ${tag ? `<span class="result-tag">${tag}</span>` : ''}
                            <div class="result-actions">
                                <button class="action-btn copy-btn"><i>ğŸ“‹</i> å¤åˆ¶</button>
                                <button class="action-btn like-btn ${isLiked ? 'active' : ''}"><i>â™¥</i> å–œæ¬¢</button>
                                <button class="action-btn collect-btn ${isCollected ? 'active' : ''}"><i>â˜†</i> æ”¶è—</button>
                                <button class="action-btn recommend-btn ${isRecommended ? 'active' : ''}"><i>â­‘</i> æ¨è</button>
                            </div>
                        `;
                        
                        resultsContainer.appendChild(resultItem);
                    }
                    
                    // æ˜¾ç¤ºç»“æœåŒºåŸŸ
                    resultsContainer.style.display = 'block';
                    regenerateBtn.style.display = 'block';
                    
                    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨åˆ°æ–°ç”Ÿæˆçš„æŒ‰é’®
                    attachEventListeners();
                }, 1500);
            }
            
            // æå–å…³é”®è¯ï¼šä¼˜åŒ–å…³é”®è¯è¿‡æ»¤é€»è¾‘ï¼Œä¿ç•™è‹±æ–‡å…³é”®è¯ï¼ˆå¦‚citywalkï¼‰
            function extractKeywords(input) {
                const words = input.split(/[\s,ï¼Œã€ï¼›;ã€‚.ï¼!ï¼Ÿ?]+/);
                const extracted = [];
                
                for (const word of words) {
                    const trimmedWord = word.trim();
                    // ä¿ç•™2å­—åŠä»¥ä¸Šä¸­æ–‡/è‹±æ–‡å…³é”®è¯ï¼ˆå¦‚citywalkã€è‡ªæ‹ï¼‰
                    if (trimmedWord.length >= 2 && !extracted.includes(trimmedWord)) {
                        extracted.push(trimmedWord);
                    }
                }
                
                return extracted.length > 0 ? extracted : ["ç”Ÿæ´»"];
            }
            
            // 2. å‡çº§æ™ºèƒ½ç”Ÿæˆé€»è¾‘ï¼šå¢åŠ ã€Œæ ‡ç­¾è‡ªåŠ¨åŒ¹é…ã€å¥å¼çµæ´»ç»„åˆã€
            function generateSmartCopy(keywords, index) {
                // åˆ†æå…³é”®è¯æƒ…æ„Ÿ
                const emotions = analyzeEmotions(keywords);
                // åŒ¹é…å¯¹åº”è¯é¢˜æ ‡ç­¾
                const tag = getTopicTag(keywords);
                
                // æå‡é«˜è´¨é‡æ¨¡æ¿ä½¿ç”¨ç‡ï¼ˆä»30%â†’50%ï¼‰ï¼Œç¡®ä¿ç½‘æ„Ÿæ–‡æ¡ˆå æ¯”æ›´é«˜
                if (Math.random() < 0.5 && highQualityTemplates.length > 0) {
                    let selectedIndex;
                    do {
                        selectedIndex = Math.floor(Math.random() * highQualityTemplates.length);
                    } while (usedIndexes.includes(selectedIndex) && usedIndexes.length < highQualityTemplates.length);
                    
                    usedIndexes.push(selectedIndex);
                    return {
                        copy: highQualityTemplates[selectedIndex],
                        tag: tag
                    };
                }
                
                // ç”Ÿæˆè‡ªå®šä¹‰ç½‘æ„Ÿæ–‡æ¡ˆ
                const template = structureTemplates[Math.floor(Math.random() * structureTemplates.length)];
                
                // è·å–ç›¸å…³æƒ…æ„Ÿè¯
                let emotionWords = [];
                for (const keyword of keywords) {
                    if (emotionKeywords[keyword]) {
                        emotionWords = emotionWords.concat(emotionKeywords[keyword]);
                    }
                }
                
                // å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸å…³æƒ…æ„Ÿè¯ï¼Œä½¿ç”¨é€šç”¨ç½‘æ„Ÿæƒ…æ„Ÿè¯
                if (emotionWords.length === 0) {
                    emotionWords = ["å¿«ä¹", "æ²»æ„ˆ", "æ¾å¼›", "æ°›å›´æ„Ÿ", "å°ç¡®å¹¸", "yyds", "ç»ç»å­", "é™å®šæ¬¾"];
                }
                
                // éšæœºé€‰æ‹©æƒ…æ„Ÿè¯ã€ä¸»é¢˜è¯ã€æ— å…³è¯
                const emotion = emotionWords[Math.floor(Math.random() * emotionWords.length)];
                const theme = keywords[Math.floor(Math.random() * keywords.length)];
                const irrelevant = irrelevantWords[Math.floor(Math.random() * irrelevantWords.length)];
                
                // å¡«å……æ¨¡æ¿ï¼ˆæ›¿æ¢{æ— å…³è¯}ï¼‰
                let copy = template
                    .replace(/{ä¸»é¢˜}/g, theme)
                    .replace(/{æƒ…æ„Ÿ}/g, emotion)
                    .replace(/{æ— å…³è¯}/g, irrelevant);
                
                // æå‡emojiä½¿ç”¨ç‡ï¼ˆä»50%â†’80%ï¼‰ï¼Œå¢å¼ºè§†è§‰ç½‘æ„Ÿ
                if (Math.random() < 0.8) {
                    const emojis = ["âœ¨", "ğŸ’«", "ğŸŒŸ", "ğŸ’–", "ğŸ¥‚", "ğŸŒ¿", "ğŸ“¸", "ğŸ", "ğŸ‚", "â˜•", "ğŸ°", "ğŸš¶â€â™€ï¸", "ğŸ¥³", "ğŸµ"];
                    // é¿å…emojié‡å¤æ·»åŠ ï¼ˆå¦‚æœæ¨¡æ¿å·²æœ‰åˆ™ä¸é‡å¤ï¼‰
                    if (!copy.includes(emojis.find(e => copy.includes(e)))) {
                        copy += " " + emojis[Math.floor(Math.random() * emojis.length)];
                    }
                }
                
                return {
                    copy: copy,
                    tag: tag
                };
            }
            
            // 3. å‡çº§æƒ…æ„Ÿåˆ†æï¼šå¢åŠ ã€Œåœºæ™¯åŒ–æƒ…æ„ŸåŒ¹é…ã€ï¼ˆå¦‚citywalkâ†’æ¼«æ¸¸ã€è‡ªåœ¨ï¼‰
            function analyzeEmotions(keywords) {
                const emotions = [];
                
                for (const keyword of keywords) {
                    if (["è‡ªæ‹", "ç…§ç‰‡", "é•œå¤´"].includes(keyword)) {
                        emotions.push("é¢œå€¼", "æ°›å›´æ„Ÿ", "é•œå¤´æ„Ÿ", "å¿«ä¹", "è‡ªä¿¡");
                    } else if (["æ—¶å…‰", "æ—¶é—´", "æ—¥å¸¸"].includes(keyword)) {
                        emotions.push("æ²»æ„ˆ", "æ¾å¼›", "å°ç¡®å¹¸", "æ¸©æŸ”", "é™å®šæ¬¾");
                    } else if (["å…¥ç§‹", "ç§‹å¤©", "è½å¶"].includes(keyword)) {
                        emotions.push("ä»ªå¼æ„Ÿ", "æ¸©æŸ”", "ä¸æœŸè€Œé‡", "é‡‘é»„", "æ²»æ„ˆ");
                    } else if (["å‘¨æœ«", "ä¼‘æ¯", "å®…å®¶"].includes(keyword)) {
                        emotions.push("èººå¹³", "æ¾å¼›", "è‡ªç„¶é†’", "æ²»æ„ˆ", "å°½å…´");
                    } else if (["å’–å•¡", "ç¾é£Ÿ", "é¥®å“"].includes(keyword)) {
                        emotions.push("ç»­å‘½", "æ²»æ„ˆ", "å¹¸ç¦æ„Ÿ", "å¿«ä¹", "æ»¡è¶³");
                    } else if (["citywalk", "æ¼«æ¸¸", "è¡—å¤´"].includes(keyword)) {
                        emotions.push("è‡ªåœ¨", "æ¢ç´¢", "çƒŸç«æ°”", "æ¾å¼›", "æ²»æ„ˆ");
                    } else {
                        emotions.push("å¿«ä¹", "æ²»æ„ˆ", "æ¾å¼›", "æ°›å›´æ„Ÿ", "å°ç¡®å¹¸");
                    }
                }
                
                return emotions;
            }
            
            // æ–°å¢ï¼šæ ¹æ®å…³é”®è¯åŒ¹é…è¯é¢˜æ ‡ç­¾
            function getTopicTag(keywords) {
                for (const keyword of keywords) {
                    if (topicTags[keyword]) {
                        return topicTags[keyword][Math.floor(Math.random() * topicTags[keyword].length)];
                    }
                }
                // é»˜è®¤æ ‡ç­¾
                return "#ç”Ÿæ´»è®°å½•";
            }
            
            // ä¸ºæŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            function attachEventListeners() {
                // å¤åˆ¶åŠŸèƒ½ï¼šä¼˜åŒ–å¤åˆ¶å†…å®¹ï¼ˆåŒ…å«æ ‡ç­¾ï¼Œæå‡å®ç”¨æ€§ï¼‰
                document.querySelectorAll('.copy-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const text = this.parentElement.previousElementSibling?.classList.contains('result-tag')
                            ? `${this.parentElement.previousElementSibling.previousElementSibling.textContent} ${this.parentElement.previousElementSibling.textContent}`
                            : this.parentElement.previousElementSibling.textContent;
                        copyToClipboard(text);
                        
                        // æ˜¾ç¤ºæç¤º
                        showToast('æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                    });
                });
                
                // å–œæ¬¢åŠŸèƒ½
                document.querySelectorAll('.like-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const item = this.closest('.result-item');
                        const text = item.dataset.text; // ä»…å­˜å‚¨æ–‡æ¡ˆä¸»ä½“ï¼Œé¿å…æ ‡ç­¾é‡å¤
                        
                        if (this.classList.contains('active')) {
                            // å–æ¶ˆå–œæ¬¢
                            likedCopies = likedCopies.filter(copy => copy !== text);
                            this.classList.remove('active');
                            showToast('å–æ¶ˆå–œæ¬¢');
                        } else {
                            // æ·»åŠ å–œæ¬¢
                            if (!likedCopies.includes(text)) {
                                likedCopies.push(text);
                            }
                            this.classList.add('active');
                            showToast('å·²å–œæ¬¢');
                        }
                        
                        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                        saveToLocalStorage();
                    });
                });
                
                // æ”¶è—åŠŸèƒ½
                document.querySelectorAll('.collect-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const item = this.closest('.result-item');
                        const text = item.dataset.text;
                        
                        if (this.classList.contains('active')) {
                            // å–æ¶ˆæ”¶è—
                            collectedCopies = collectedCopies.filter(copy => copy !== text);
                            this.classList.remove('active');
                            showToast('å–æ¶ˆæ”¶è—');
                        } else {
                            // æ·»åŠ æ”¶è—
                            if (!collectedCopies.includes(text)) {
                                collectedCopies.push(text);
                            }
                            this.classList.add('active');
                            showToast('å·²æ”¶è—');
                        }
                        
                        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                        saveToLocalStorage();
                    });
                });
                
                // æ¨èåŠŸèƒ½
                document.querySelectorAll('.recommend-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const item = this.closest('.result-item');
                        const text = item.dataset.text;
                        
                        if (this.classList.contains('active')) {
                            // å–æ¶ˆæ¨è
                            recommendedCopies = recommendedCopies.filter(copy => copy !== text);
                            this.classList.remove('active');
                            showToast('å–æ¶ˆæ¨è');
                        } else {
                            // æ·»åŠ æ¨è
                            if (!recommendedCopies.includes(text)) {
                                recommendedCopies.push(text);
                            }
                            this.classList.add('active');
                            showToast('å·²æ¨è');
                        }
                        
                        // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                        saveToLocalStorage();
                    });
                });
            }
            
            // å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼šä¼˜åŒ–å…¼å®¹æ€§
            function copyToClipboard(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                textarea.style.position = 'fixed';
                document.body.appendChild(textarea);
                textarea.select();
                
                try {
                    // ä¼˜å…ˆä½¿ç”¨ç°ä»£API
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(text).then(() => {
                            console.log('å¤åˆ¶æˆåŠŸ');
                        }).catch(err => {
                            document.execCommand('copy');
                        });
                    } else {
                        document.execCommand('copy');
                    }
                } catch (err) {
                    console.error('æ— æ³•å¤åˆ¶æ–‡æœ¬: ', err);
                    showToast('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                }
                
                document.body.removeChild(textarea);
            }
            
            // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
            function showToast(message) {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 2000);
            }
            
            // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°å­˜å‚¨
            function saveToLocalStorage() {
                localStorage.setItem('likedCopies', JSON.stringify(likedCopies));
                localStorage.setItem('collectedCopies', JSON.stringify(collectedCopies));
                localStorage.setItem('recommendedCopies', JSON.stringify(recommendedCopies));
            }
            
            // ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
            function loadSavedData() {
                const liked = localStorage.getItem('likedCopies');
                const collected = localStorage.getItem('collectedCopies');
                const recommended = localStorage.getItem('recommendedCopies');
                
                if (liked) likedCopies = JSON.parse(liked);
                if (collected) collectedCopies = JSON.parse(collected);
                if (recommended) recommendedCopies = JSON.parse(recommended);
            }
            
            // æ›´æ–°ä¿å­˜çš„ç»“æœé¡µé¢ï¼šæ˜¾ç¤ºæ–‡æ¡ˆæ—¶ä¿ç•™æ ‡ç­¾
            function updateSavedResults(type) {
                let copies = [];
                let containerId = '';
                let emptyId = '';
                
                if (type === 'likes') {
                    copies = likedCopies;
                    containerId = 'liked-results';
                    emptyId = 'liked-empty';
                } else if (type === 'collections') {
                    copies = collectedCopies;
                    containerId = 'collected-results';
                    emptyId = 'collected-empty';
                } else if (type === 'recommendations') {
                    copies = recommendedCopies;
                    containerId = 'recommended-results';
                    emptyId = 'recommended-empty';
                }
                
                const container = document.getElementById(containerId);
                const emptyState = document.getElementById(emptyId);
                
                // æ¸…ç©ºå®¹å™¨
                container.innerHTML = '';
                
                if (copies.length === 0) {
                    // æ˜¾ç¤ºç©ºçŠ¶æ€
                    emptyState.style.display = 'block';
                    container.style.display = 'none';
                } else {
                    // éšè—ç©ºçŠ¶æ€
                    emptyState.style.display = 'none';
                    container.style.display = 'block';
                    
                    // æ·»åŠ ä¿å­˜çš„æ–‡æ¡ˆï¼ˆåŒ¹é…æ ‡ç­¾ï¼‰
                    copies.forEach((copy, index) => {
                        // æå–æ–‡æ¡ˆä¸­çš„å…³é”®è¯ï¼ŒåŒ¹é…æ ‡ç­¾
                        const keywords = extractKeywords(copy);
                        const tag = getTopicTag(keywords);
                        
                        const resultItem = document.createElement('div');
                        resultItem.className = 'result-item';
                        resultItem.style.animationDelay = `${index * 0.1}s`;
                        resultItem.innerHTML = `
                            <div class="result-text">${copy}</div>
                            ${tag ? `<span class="result-tag">${tag}</span>` : ''}
                            <div class="result-actions">
                                <button class="action-btn copy-btn"><i>ğŸ“‹</i> å¤åˆ¶</button>
                                <button class="action-btn remove-btn"><i>âŒ</i> ç§»é™¤</button>
                            </div>
                        `;
                        
                        container.appendChild(resultItem);
                    });
                    
                    // ä¸ºå¤åˆ¶æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬
                    container.querySelectorAll('.copy-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const text = this.parentElement.previousElementSibling?.classList.contains('result-tag')
                                ? `${this.parentElement.previousElementSibling.previousElementSibling.textContent} ${this.parentElement.previousElementSibling.textContent}`
                                : this.parentElement.previousElementSibling.textContent;
                            copyToClipboard(text);
                            showToast('æ–‡æ¡ˆå·²å¤åˆ¶åˆ°å‰ªè´´æ¿');
                        });
                    });
                    
                    // ä¸ºç§»é™¤æŒ‰é’®æ·»åŠ äº‹ä»¶ç›‘å¬
                    container.querySelectorAll('.remove-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const item = this.closest('.result-item');
                            const text = item.querySelector('.result-text').textContent;
                            
                            if (type === 'likes') {
                                likedCopies = likedCopies.filter(copy => copy !== text);
                            } else if (type === 'collections') {
                                collectedCopies = collectedCopies.filter(copy => copy !== text);
                            } else if (type === 'recommendations') {
                                recommendedCopies = recommendedCopies.filter(copy => copy !== text);
                            }
                            
                            // æ›´æ–°UI
                            item.remove();
                            
                            // å¦‚æœæ‰€æœ‰é¡¹ç›®éƒ½è¢«ç§»é™¤ï¼Œæ˜¾ç¤ºç©ºçŠ¶æ€
                            if (container.children.length === 0) {
                                emptyState.style.display = 'block';
                                container.style.display = 'none';
                            }
                            
                            // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
                            saveToLocalStorage();
                            
                            showToast('å·²ç§»é™¤');
                        });
                    });
                }
            }
            
            // åˆå§‹åŒ–é¡µé¢
            switchPage('home');
        });
    </script>
</body>
</html>
